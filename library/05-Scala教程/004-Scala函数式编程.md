# Scalaå‡½æ•°å¼ç¼–ç¨‹ğŸ“

## åŸºç¡€ç¯‡

### å‡½æ•°çš„å®šä¹‰

#### åŸºæœ¬è¯­æ³•

```scala
def å‡½æ•°å(å‚æ•°å:ç±»å‹):è¿”å›ç±»å‹={
    return  å¯çœç•¥
}
//å¯å˜å‡½æ•°å‚æ•°ç±»å‹ğŸ“
def fun(n1:Int,args:Int*)={
    
}
// æ²¡æœ‰å‚æ•°çš„ï¼Œæ²¡æœ‰
def demo="hello"
//ç­‰ä»·
def demo()={
    "hello"
}
```

#### é€’å½’å‡½æ•°è¯´æ˜

1. ç¨‹åºæ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å—ä¿æŠ¤çš„å‡½æ•°æ ˆ
2. å‡½æ•°çš„å±€éƒ¨å˜é‡æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å½±å“
3. ä¸å¯ä»¥ä½¿ç”¨ç±»å‹æ¨å¯¼

#### å‡½æ•°ä½¿ç”¨ç»†èŠ‚

1. å‡½æ•°çš„å½¢å‚å¯ä»¥æœ‰å¤šä¸ªï¼Œå¦‚æœæ²¡æœ‰ï¼Œè°ƒç”¨æ—¶å€™å¯ä»¥ä¸å†™()
2. å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼åˆ—è¡¨çš„æ•°æ®ç±»å‹å¯ä»¥æ˜¯å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹
3. å‡½æ•°å¯ä»¥æ ¹æ®å‡½æ•°æœ€åä¸€è¡Œæ¨å¯¼å‡½æ•°è¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥çœç•¥returnå’Œè¿”å›å€¼ç±»å‹
4. å£°æ˜Unitï¼Œå³ä¸ºæ— è¿”å›å€¼ï¼Œä¸æ˜ç¡®è¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥ç”¨Any

### è¿‡ç¨‹

å°†å‡½æ•°çš„è¿”å›**ç±»å‹ä¸ºUnit**çš„å‡½æ•°æˆä¸ºè¿‡ç¨‹ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰æ˜ç¡®è¿”å›å€¼ï¼Œé‚£ä¹ˆç­‰å·å¯ä»¥çœç•¥ã€‚

```scala
def demo(n:Int){
    
}
```

### æƒ°æ€§å‡½æ•°

æƒ°æ€§è®¡ç®—æ˜¯è®¸å¤šå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ•ˆï¼Œæƒ°æ€§é›†åˆåœ¨éœ€è¦æ—¶æä¾›å…¶å…ƒç´ ï¼Œæ— éœ€é¢„å…ˆè®¡ç®—ä»–ä»¬ã€‚

å½“å‡½æ•°è¿”å›å€¼è¢«å£°æ˜ä¸ºlazyæ—¶ï¼Œå‡½æ•°çš„æ‰§è¡Œå°†è¢«æ¨è¿Ÿæ‰§è¡Œï¼Œç›´åˆ°é¦–æ¬¡å–å€¼ï¼Œè¯¥å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œã€‚

æ³¨æ„ç»†èŠ‚ï¼š

1. `lazy`åªèƒ½ä¿®é¥°valï¼Œä¸èƒ½ä¿®é¥°var
2. å˜é‡ä¹Ÿå¯ä»¥è¢«å£°æ˜ä¸º`lazy`

**åº”ç”¨åœºæ™¯**ï¼šå°†è€—æ—¶çš„è®¡ç®—æ¨è¿Ÿåˆ°ç»å¯¹éœ€æ±‚çš„æ—¶å€™ã€‚

```scala
object LazyDemo {

  def main(args: Array[String]): Unit = {
    lazy val res = sum(12, 12);
    printf("----------")
    printf("sum=" + res)
  }

  def sum(n1: Int, n2: Int): Int = {
    printf("æ‰§è¡Œäº†sum===")
    n1 + n2
  }
}
```

### å¼‚å¸¸ğŸ“

Scalaå’ŒJavaçš„å¼‚å¸¸åŒºåˆ«ï¼Œå…¶ä»–çš„éƒ½å¯ä»¥å‚è€ƒJavaçš„å†…å®¹ï¼Œfinallyè¡¨ç¤ºèµ„æºçš„é‡Šæ”¾ã€‚

1. åªèƒ½æœ‰ä¸€ä¸ªcatch
2. Scalaä¸­çš„catchæœ‰å¤šä¸ªcaseï¼Œ=>è¡¨ç¤ºå¤„ç†çš„å¼‚å¸¸çš„ä»£ç å—
3. æ²¡æœ‰ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œåªæœ‰è¿è¡Œæ—¶å¼‚å¸¸

```scala
object ThrowDemo {
  def main(args: Array[String]): Unit = {
/*    val t = test
    printf("1.===" + t.toString)
    printf("2....")*/

    try{
      test
    }catch {
      case exception: Exception=>{
        printf("3333")
      }
    }
  }

  def test: Unit = {
    throw new Exception("å¼‚å¸¸")
  }
}
```

### ç»ƒä¹ é¢˜

```scala
def myPrint(n: Int): Unit = {
  for (i <- 1 to n) {
    for (j <- 1 to i) {
      printf("%d * %d = %d\t", j, i, i * j)
    }
    println()
  }
}
```
## é«˜çº§ç¯‡

### åå‡½æ•°

`collect`å‡½æ•°æ”¯æŒåå‡½æ•°ï¼Œ å½“ä½¿ç”¨åå‡½æ•°æ—¶ï¼Œä¼šéå†é›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼Œç¼–è¯‘å™¨æ‰§è¡Œæµç¨‹æ—¶å…ˆæ‰§è¡ŒisDefinedAt()ï¼Œå¦‚æœä¸ºtrue ,å°±ä¼šæ‰§è¡Œ apply, æ„å»ºä¸€ä¸ªæ–°çš„Int å¯¹è±¡è¿”å›ï¼Œæ‰§è¡ŒisDefinedAt() ä¸ºfalse å°±è¿‡æ»¤æ‰è¿™ä¸ªå…ƒç´ ï¼Œå³ä¸æ„å»ºæ–°çš„Intå¯¹è±¡ã€‚

```scala
  def main(args: Array[String]): Unit = {
    val list = List(1, 2, 3, 4, "abc", 4)
    //åå‡½æ•°PartialFunctionæ¥æ”¶å‚æ•°Any,è¿”å›ç±»å‹Int
    val pfn = new PartialFunction[Any, Int] {
        //åˆ¤æ–­å…ƒç´ 
      override def isDefinedAt(x: Any): Boolean = {
        x.isInstanceOf[Int]
      }
        //isDefinedAt æ˜¯trueæ‰§è¡Œ
      override def apply(v1: Any): Int = {
        v1.asInstanceOf[Int] + 1
      }
    }
      //collect
    println(list.collect(pfn))
  }
//ç®€å†™
   val list3 = list.collect{
      case i:Int => i + 1
      case j:Double => (j * 2).toInt
      case k:Float => (k * 3).toInt
    }

```

### ä½œä¸ºå‚æ•°çš„å‡½æ•°

å‡½æ•°ä½œä¸ºä¸€ä¸ªå˜é‡ä¼ å…¥åˆ°äº†å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œé‚£ä¹ˆè¯¥ä½œä¸ºå‚æ•°çš„å‡½æ•°çš„ç±»å‹æ˜¯ï¼šfunction1ï¼Œå³ï¼š(å‚æ•°ç±»å‹) => è¿”å›ç±»å‹ã€‚PSï¼šæœ‰nä¸ªå‚æ•°çš„å‡½æ•°ç±»å‹ä¸º\<`function`**n**\>

å‰é¢çš„map(xx)å°±æ˜¯è¿™æ ·çš„å‡½æ•°ã€‚

### åŒ¿åå‡½æ•°

æ²¡æœ‰åå­—çš„å‡½æ•°å°±æ˜¯åŒ¿åå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è¡¨è¾¾å¼æ¥è®¾ç½®åŒ¿åå‡½æ•°ã€‚

```scala
    val puls = (x: Int, y: Int) => {
      x + y
    }
```

### é«˜é˜¶å‡½æ•°

èƒ½å¤Ÿæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå«åšé«˜é˜¶å‡½æ•°ã€‚

```scala
    def sum(n: Int): Int = {
      n + 1
    }

    def add(n: Int): Int = {
      n * 2
    }

    def hofn(f1: Int => Int, f2: Int => Int, n: Int): Int = {
      f1(f2(n))
    }

    println(hofn(sum, add,5))
```

é«˜é˜¶å‡½æ•°è¿”å›åŒ¿åå‡½æ•°

```scala
  def main(args: Array[String]): Unit = {

    def high(x: Int) = {
      (y: Int) => x + y
    }

    println(high(1)(3))
  }
```

### ç±»å‹æ¨æ–­

1. å‚æ•°ç±»å‹æ˜¯å¯ä»¥æ¨æ–­æ—¶ï¼Œå¯ä»¥çœç•¥å‚æ•°ç±»å‹
2. å½“ä¼ å…¥çš„å‡½æ•°ï¼Œåªæœ‰å•ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥çœå»æ‹¬å·
3. å¦‚æœå˜é‡åªåœ¨`=>`å³è¾¹åªå‡ºç°ä¸€æ¬¡ï¼Œå¯ä»¥ç”¨`_`æ¥ä»£æ›¿

### é—­åŒ…ï¼ˆclosureï¼‰

é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆçš„ä¸€ä¸ªæ•´ä½“ï¼ˆå®ä½“ï¼‰ã€‚

ä¹Ÿå°±æ˜¯è¯´é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼ä¾èµ–äºå£°æ˜åœ¨å‡½æ•°å¤–éƒ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡

```scala
def high(x: Int) = {
  (y: Int) => x + y
}
//f å°±æ˜¯é—­åŒ…ï¼Œhighå‡½æ•°yä¸å¤–éƒ¨çš„xå½¢æˆä¸€ä¸ªæ•´ä½“
val f = high(20)
println(f(1))
```

### å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰

1. å‡½æ•°ç¼–ç¨‹ä¸­ï¼Œæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°éƒ½å¯ä»¥è½¬åŒ–ä¸ºæ¥å—å•ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè¿™ä¸ªè½¬åŒ–è¿‡ç¨‹å°±å«**æŸ¯é‡ŒåŒ–**
2. æŸ¯é‡ŒåŒ–å°±æ˜¯è¯æ˜äº†å‡½æ•°åªéœ€è¦ä¸€ä¸ªå‚æ•°è€Œå·²ã€‚å…¶å®æˆ‘ä»¬åˆšæ‰çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå·²ç»æ¶‰åŠåˆ°äº†æŸ¯é‡ŒåŒ–æ“ä½œ

```scala
  def main(args: Array[String]): Unit = {
    /**
      * ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªæ•´æ•°ï¼Œå¯ä»¥è¿”å›ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯ï¼Œè¦æ±‚:
      *
      * ä½¿ç”¨å¸¸è§„çš„æ–¹å¼å®Œæˆ
      * ä½¿ç”¨é—­åŒ…çš„æ–¹å¼å®Œæˆ
      * ä½¿ç”¨å‡½æ•°æŸ¯é‡ŒåŒ–å®Œæˆ
      */
    def mult1(x: Int, y: Int) = x * y

    println("01-" + mult1(2, 3))

    def mult2(x: Int) = {
      (y: Int) => x * y
    }

    println("02-" + mult2(2)(3))

    def mult3(x: Int)(y: Int) = x * y

    println("03-" + mult3(2)(3))
  }
```

### æ§åˆ¶æŠ½è±¡

1. å‚æ•°æ˜¯å‡½æ•°
2. å‡½æ•°å‚æ•°æ²¡æœ‰è¾“å…¥å€¼ä¹Ÿæ²¡æœ‰è¿”å›å€¼